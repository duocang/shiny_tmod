## General

tmod is an R package for analysing blood transcriptional modules (BTMs).
This web page is an interface to that package. For more information, read
the [package vignette](tmod_vignette_current.pdf).

The definitions of the BTMs are taken either from Li et al. or Chaussabel
et al.

In general, the genes in the modules are defined by their [HGNC
symbols](http://www.genenames.org), for example "GBP5" or "IFNB1".
You can also use Refseq or Unigene identifiers. The mapping of these
identifiers to HGNC symbols is done using the BioConductor package
[org.Hs.eg.db](http://www.bioconductor.org/packages/release/data/annotation/html/org.Hs.eg.db.html)

----

## Tests

There are three statistical tests pre-configured for tmod:

* Mann-Whitney U-test, and
* CERNO, and
* hypergeometric test for enrichment

First, select the desired statistical test under "Test type". Next, upload
the file (for U-test) or files (for hypergeometric test) under "Input file(s)".

Finally, click on "Run tmod".

### Mann-Whitney U test

**Input:** The U test works on a single sorted list of gene symbols. 

* Create an Excel file with the first containing gene names
* Sort the file e.g. by p-value or principal component weight
* Export as "CSV" (comma separated values)
* Click on "Choose file" in the "Tests" tab.
* Click on the "Run tmod" button

The results should now appear below.

**Output:** The results table contains the following columns:

* Plot: click on the button in this column to see the evidence plot
* ID: module ID
* Title: module name
* U: the Mann-Whitney U statistics
* N1: sum of ranks of genes in the module
* auc: Area under curve, a measure of the effect size
* P.Value: p-value of the U test, raw
* adj.P.Val: p-value for the U test, corrected for multiple testing

### CERNO test

The CERNO test has been described by [Yamaguchi et al.
(2007)](http://www.sciencedirect.com/science/article/pii/S0165572807004456).
It is very similar to the Mann-Whitney test in that it uses a single sorted
list of gene symbols, but the statistics is calculated differently and
appears to perform better for some of the modules.

**Input:** The CERNO test works on a single sorted list of gene symbols.
Follow the instructions for the U test.

**Output:** The results table contains the following columns:

* Plot: click on the button in this column to see the evidence plot
* ID: module ID
* Title: module name
* cerno: the CERNO statistics
* N1: sum of ranks of genes in the module
* cES: average log-rank of the genes in the module
* P.Value: p-value of the U test, raw
* adj.P.Val: p-value for the U test, corrected for multiple testing


### Hypergeometric test

**Input:** The HG test works on two unsorted lists of gene symbols. First list, called
"foreground", contains the symbols of genes that are thought to be for
example differentially expressed. The second list contains all gene symbols
that were included in the analysis (e.g. spotted on a microarray).

* Create two Excel files:
  - foreground file with genes that are differentially expressed
  - background file with all genes ("gene universe")
* Go to the "Test" tab of the tmod interface
* Under "Test type" select "hypergeometric test"
* Click on both "Choose file" buttons that appear and select the foreground and the background
* Click on the "Run tmod" button

The results should now appear below.

**Output:** The results table contains the following columns:

* Plot: click on the button in this column to see the evidence plot
* ID: module ID
* Title: module name
* b: number of genes in the foreground set that belong to the given module
* B: total number of genes that belong to the given module
* n: size of foreground set
* N: size of gene universe (foreground + background)
* E: enrichment coefficient equal to (b/n)/(B/N)
* P.Value: p-value of the hypergeometric test, raw
* adj.P.Val: p-value for the hypergeometric test, corrected for multiple testing


### The result table

You can sort the result table by clicking on the respective headers.
Furthermore, you can limit the displayed items by entering text in the
boxes *below* the result table.


----

## Evidence plots

By clicking on the radio button of the left side of the result table, you
can view an "evidence plot" -- a plot which visualizes the enrichment found
in the data. Depending on the type of tests used, the evidence plot is
either a ROC curve (for the U test) or a barplot (for the hypergeometric
test).

Below you see an evidence plot generated by tmod in the single list mode (U
test). The ROC curve shows an enrichment of the module LI.M37.1 (called
*enriched in neutrophils (I)*).

The rug (grey bar) at the
bottom of the plot shows the distribution of module genes within the total
gene list. Each black vertical line denotes one gene.

![Evidence plot generated by tmod](evidenceplot_example1.png)

----

## Problems and release notes

This is the initial release of tmod interface. If you have problems with
the web page, please contact [January
Weiner](mailto:january@mpiib-berlin.mpg.de).







